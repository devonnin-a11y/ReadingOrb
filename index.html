<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Orb Reader ‚Äì Kids Phonics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0b1f26" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="manifest" href="manifest.webmanifest" />
</head>
<body>
  <!-- Confetti overlay -->
  <div id="fxLayer" class="fx-layer" aria-hidden="true"></div>

  <!-- Auto-star prompt modal -->
  <div id="modalOverlay" class="modal-overlay" hidden>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle" class="modal-title">‚≠ê Mission Check!</h3>
      <p id="modalText" class="modal-text">Did they read it well?</p>
      <div class="modal-actions">
        <button id="modalNo" class="btn ghost" type="button">Not yet</button>
        <button id="modalYes" class="btn primary" type="button">Yes! ‚≠ê</button>
      </div>
    </div>
  </div>

  <div class="app">
    <header class="app-header">
      <div class="header-main">
        <div>
          <h1 class="logo">‚ú® Orb Reader</h1>
          <p class="tagline">Type it. Watch it. Sound it out.</p>

          <!-- Profiles -->
          <div class="profile-switch">
            <button type="button" class="profile-btn active" data-profile="Vhon">
              <img src="img/vhon.png" alt="Vhon" class="profile-avatar" />
              <span>Vhon</span>
            </button>
            <button type="button" class="profile-btn" data-profile="Vio">
              <img src="img/vio.png" alt="Vio" class="profile-avatar" />
              <span>Vio</span>
            </button>
          </div>

          <!-- Progress row -->
          <div class="progress-row">
            <div id="rewardBanner" class="reward-banner">‚≠ê Stars today: 0</div>
            <div id="streakChip" class="streak-chip">üî• Streak: 0</div>
            <div id="levelChip" class="level-chip">‚ö° Level 1</div>
          </div>

          <!-- Level bar -->
          <div class="levelbar" aria-label="Level progress">
            <div class="levelbar-label">
              <span id="levelLabelLeft">Level 1</span>
              <span id="levelLabelRight">0 / 10</span>
            </div>
            <div class="levelbar-track">
              <div id="levelbarFill" class="levelbar-fill"></div>
            </div>
          </div>
        </div>

        <!-- Parent / Kid mode toggle -->
        <div class="mode-toggle">
          <span id="modeLabel" class="mode-label">Parent mode</span>
          <button id="modeToggle" class="toggle-pill" type="button" aria-label="Toggle Kid Mode">
            <span class="toggle-knob"></span>
          </button>
        </div>
      </div>
    </header>

    <main>
      <!-- Setup screen -->
      <section id="setupScreen" class="screen active">
        <h2>Create a reading passage</h2>
        <p class="hint">Type a sentence or short story for the kids to practice.</p>

        <label for="passageInput" class="field-label">Text to practice</label>
        <textarea
          id="passageInput"
          rows="5"
          placeholder="Example: The red cat sat on the big blue mat."
        ></textarea>

        <h3 class="preset-heading">Quick practice passages</h3>
        <p class="hint small">Tap one to auto-fill. You can still edit the text after.</p>

        <div class="preset-list">
          <button type="button" class="btn chip preset-btn"
            data-passage="The cat sat on the mat. The dog sat on the log.">
            CVC ‚Äì Cat and Dog
          </button>

          <button type="button" class="btn chip preset-btn"
            data-passage="I can hop. I can run. I can jump. I can have fun!">
            Action words ‚Äì I can‚Ä¶
          </button>

          <button type="button" class="btn chip preset-btn"
            data-passage="The sun is hot. The sky is blue. The grass is green. I like you.">
            Colors &amp; simple sentences
          </button>

          <button type="button" class="btn chip preset-btn"
            data-passage="Mom had a red pot. Dad had a big pan. We all had hot soup.">
            5-year-old warmup
          </button>
        </div>

        <div class="slider-row speed-row">
          <label for="speedSlider" class="field-label">Voice speed</label>
          <input type="range" id="speedSlider" min="0.5" max="1.5" step="0.1" value="0.9" />
          <span id="speedValue" class="slider-value">0.9x</span>
        </div>

        <div class="slider-row voice-row">
          <label for="voiceSelect" class="field-label">Voice</label>
          <select id="voiceSelect" class="select">
            <option value="">Auto (device default)</option>
          </select>
        </div>

        <button id="startReadingBtn" class="btn primary">Start Reading Mode ‚ñ∂</button>
      </section>

      <!-- Reading screen -->
      <section id="readingScreen" class="screen">
        <div class="reading-top-bar">
          <button id="backBtn" class="btn ghost">‚Üê Edit text</button>

          <div class="play-controls">
            <button id="playBtn" class="btn circle" title="Play" type="button">‚ñ∂</button>
            <button id="stopBtn" class="btn circle" title="Stop" type="button">‚èπ</button>
          </div>
        </div>

        <div class="reading-layout">
          <!-- Character panel -->
          <div class="character-panel">
            <div class="character-card">
              <img id="characterImage" src="img/vhon.png" alt="Current reader character" class="character-img" />
            </div>
          </div>

          <!-- Text + orb panel -->
          <div class="reading-area" id="readingArea">
            <div id="beam" class="beam" aria-hidden="true"></div>
            <div id="orb" class="orb" aria-hidden="true"></div>
            <p id="readingText" class="reading-text"></p>
          </div>
        </div>

        <div class="phonics-panel">
          <div class="phonics-header-row">
            <h3>Sound it out</h3>
            <label class="field-label inline">
              <input type="checkbox" id="chunkToggle" />
              Chunk mode
            </label>
          </div>

          <label for="wordSlider" class="field-label">Move the orb word by word</label>
          <input type="range" id="wordSlider" min="0" max="0" value="0" step="1" />

          <div class="word-info">
            <div>
              <span class="word-label">Word:</span>
              <span id="currentWordDisplay" class="word-value">‚Äì</span>
            </div>
            <div>
              <span class="word-label">Phonics:</span>
              <span id="phonicsDisplay" class="word-value">‚Äì</span>
            </div>
          </div>

          <div class="reward-row">
            <button id="rewardBtn" class="btn chip reward-btn" type="button">‚≠ê They did great!</button>
          </div>

          <p class="hint small parent-tip">
            Tip: Drag slowly for your 3-year-old. In <strong>Kid mode</strong>,
            the words and buttons get bigger for easier tapping.
          </p>
        </div>
      </section>
    </main>
  </div>

  <script src="js/app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("sw.js").catch(() => {});
      });
    }
  </script>
</body>
</html>
